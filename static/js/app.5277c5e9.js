(function(t){function s(s){for(var i,o,r=s[0],c=s[1],u=s[2],p=0,v=[];p<r.length;p++)o=r[p],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&v.push(n[o][0]),n[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(s);while(v.length)v.shift()();return a.push.apply(a,u||[]),e()}function e(){for(var t,s=0;s<a.length;s++){for(var e=a[s],i=!0,r=1;r<e.length;r++){var c=e[r];0!==n[c]&&(i=!1)}i&&(a.splice(s--,1),t=o(o.s=e[0]))}return t}var i={},n={app:0},a=[];function o(s){if(i[s])return i[s].exports;var e=i[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=t,o.c=i,o.d=function(t,s,e){o.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,s){if(1&s&&(t=o(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var i in t)o.d(e,i,function(s){return t[s]}.bind(null,i));return e},o.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(s,"a",s),s},o.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},o.p="/static/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=s,r=r.slice();for(var u=0;u<r.length;u++)s(r[u]);var l=c;a.push([0,"chunk-vendors"]),e()})({0:function(t,s,e){t.exports=e("56d7")},"0927":function(t,s,e){"use strict";var i=e("66fb"),n=e.n(i);n.a},"1c76":function(t,s,e){},4365:function(t,s,e){},"51a3":function(t,s,e){},"56d7":function(t,s,e){"use strict";e.r(s);e("e260"),e("e6cf"),e("cca6"),e("a79d");var i=e("2b0e"),n=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app"}},[e("router-view"),e("nav",{staticClass:"Nav-bar"},[e("div",{staticClass:"Nav-bar__link"},[e("router-link",{attrs:{to:"/public"}},[t._v("Public")])],1),e("div",{staticClass:"Nav-bar__link"},[e("router-link",{attrs:{to:"/private"}},[t._v("Private")])],1),e("div",{staticClass:"Nav-bar__link"},[e("router-link",{attrs:{to:"/new"}},[t._v("New")])],1),e("div",{staticClass:"Nav-bar__link"},[e("router-link",{attrs:{to:"/mypage"}},[t._v("MyPage")])],1)])],1)},a=[],o=(e("5c0b"),e("2877")),r={},c=Object(o["a"])(r,n,a,!1,null,null,null),u=c.exports,l=e("8c4f"),p=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"Public"},[e("Search",{attrs:{query:t.query},on:{search:function(s){return t.search()}}}),e("PostList",{attrs:{"posts-data":t.posts}})],1)},v=[],d=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"Search"},[e("form",{staticClass:"Search__form",attrs:{action:""}},[e("label",{staticClass:"Search__label",attrs:{for:"text-box"}},[t._v("検索")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"Search__input",attrs:{type:"text",id:"text-box"},domProps:{value:t.query},on:{input:function(s){s.target.composing||(t.query=s.target.value)}}}),e("div",{staticClass:"Search__submit",on:{click:t.getPost}})]),e("div",{staticClass:"Search__filter"})])},_=[],f={name:"Search",data:function(){return{query:""}},methods:{getPost:function(){this.$parent.query=this.query,this.$emit("search")}}},h=f,m=(e("e589"),Object(o["a"])(h,d,_,!1,null,null,null)),b=m.exports,C=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"PostList"},t._l(t.postsData,(function(s){return e("div",{key:s.id,staticClass:"Post"},[e("div",{staticClass:"Post__icon"},[e("img",{attrs:{src:s.userIcon,alt:""}})]),e("div",{staticClass:"Post__text"},[t._v(" "+t._s(s.text)+" ")]),e("div",{staticClass:"Post__container"},t._l(s.options,(function(i){return e("div",{key:i.id,staticClass:"Post__option",class:{active:s.isSelect===i.id},on:{click:function(e){return t.Select(s,i)}}},[t._v(" "+t._s(i.content)+" ")])})),0),e("transition",{attrs:{name:"result"}},[s.voted?e("div",[e("div",{staticClass:"Post__divider"}),e("div",{staticClass:"Post__result__title"},[t._v("結果")]),e("div",{staticClass:"Post__container"},t._l(s.options,(function(i){return e("div",{key:i.id,staticClass:"Post__result__option"},[e("div",{staticClass:"Post__result__bar",style:{width:t.rate(i.num,s.total)+"%"}}),e("div",{staticClass:"Post__result__num"},[t._v(t._s(i.num))])])})),0)]):t._e()])],1)})),0)},y=[],P={name:"PostList",props:{postsData:{type:Array,required:!0}},methods:{Select:function(t,s){t.voted||(t.isSelect===s.id?t.isSelect=0:t.isSelect=s.id,this.Submit(t,t.options))},Submit:function(t,s){for(var e=[],i=s.length,n=0;n<i;n++)s[n]&&(e[n]=s[n].id);this.axios.post("/api/v1/posts/"+t.id,{selects:e}).then((function(e){t.voted=!0;for(var n=0;n<i;n++)s[n].num=e.data.options[n].num}))},rate:function(t,s){return t/s*100}}},g=P,x=(e("f288"),Object(o["a"])(g,C,y,!1,null,null,null)),w=x.exports,S={name:"public",components:{Search:b,PostList:w},data:function(){return{posts:[],query:""}},methods:{search:function(){var t=this;this.axios.get("/api/v1/posts/public?q="+this.query).then((function(s){t.posts=s.data.posts}))}},created:function(){var t=this;this.axios.get("/api/v1/posts/public").then((function(s){var e,i,n=s.data.posts;for(e=0;e<n.length;e++)for(n[e].isSelect=0,i=0;i<n[e].options.length;i++)n[e].options[i].selected=!1;t.posts=s.data.posts})),this.query=""}},k=S,O=(e("a3a5"),Object(o["a"])(k,p,v,!1,null,null,null)),N=O.exports,j=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"Private"},[e("Search"),e("PostList",{attrs:{"posts-data":t.posts}})],1)},q=[],M={name:"private",components:{Search:b,PostList:w},data:function(){return{posts:[],query:""}},created:function(){var t=this;this.axios.get("/api/v1/posts/private").then((function(s){for(var e=s.data.posts,i=0;i<e.length;i++){e[i].isSelect=0;for(var n=0;n<e[i].options.length;n++)e[i].options[n].selected=!1}t.posts=s.data.posts})),this.query=""}},L=M,$=(e("a582"),Object(o["a"])(L,j,q,!1,null,null,null)),A=$.exports,E=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"New"},[e("h2",{staticClass:"New__title"},[t._v("質問文")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"New__textarea",attrs:{cols:"30",rows:"10"},domProps:{value:t.text},on:{input:function(s){s.target.composing||(t.text=s.target.value)}}}),e("h2",{staticClass:"New__title"},[t._v("選択肢")]),e("div",{staticClass:"New__add-option",on:{click:t.addOption}},[t._v(" 項目を追加する ")]),t._l(t.options,(function(s){return e("div",{key:s.id,staticClass:"New__options"},[e("textarea",{staticClass:"New__textarea",attrs:{cols:"30",rows:"10"}}),e("div",{staticClass:"New__option__delete",on:{click:function(e){return t.deleteOption(s.id)}}},[t._v(" 項目を削除する ")])])})),e("div",{staticClass:"New__submit",on:{click:t.releasePost}},[t._v(" 投稿する ")])],2)},I=[],D=(e("a434"),{name:"new",data:function(){return{id:0,userId:"",text:"",count:1,options:[{id:0,content:""}]}},methods:{addOption:function(){this.options.push({id:this.count++,content:""})},deleteOption:function(t){for(var s=0;s<this.count;s++)if(this.options[s].id===t){this.options.splice(s,1);break}},releasePost:function(){this.axios.post("/api/v1/posts",{text:this.text,options:this.options}).then((function(t){200===t.status&&alert("投稿完了！")})),this.text="",this.options=[{id:0,content:""}]}},created:function(){this.id=1,this.userId="sanple-user"}}),T=D,J=(e("0927"),Object(o["a"])(T,E,I,!1,null,null,null)),R=J.exports,U=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"MyPage"},[e("div",{staticClass:"Mypage__main"},[e("div",{staticClass:"Mypage__image"},[e("img",{attrs:{src:t.user.homeImageURL,alt:""}})]),e("div",{staticClass:"Mypage__icon"},[e("img",{attrs:{src:t.user.iconURL,alt:""}})]),e("div",{staticClass:"Mypage__name"},[e("h1",[t._v(t._s(t.user.name))]),e("h2",[t._v(t._s(t.user.usersID))])]),e("div",{staticClass:"Mypage__text"},[t._v(" "+t._s(t.user.text)+" ")])]),e("div",{staticClass:"PostSwitch"},[e("div",{staticClass:"PostSwitch__button",class:{active:0===t.isActive},on:{click:function(s){return t.changeActive(0)}}},[t._v(" 過去の投稿 ")]),e("div",{staticClass:"PostSwitch__button",class:{active:1===t.isActive},on:{click:function(s){return t.changeActive(1)}}},[t._v(" 過去の投票 ")])]),0===t.isActive?e("div",{staticClass:"PostList"},t._l(t.posts,(function(s){return e("div",{key:s.id,staticClass:"Post"},[e("div",{staticClass:"Post__icon"}),e("div",{staticClass:"Post__text"},[t._v(" "+t._s(s.text)+" ")]),e("div",{staticClass:"Post__options"},t._l(s.options,(function(s){return e("div",{key:s.id,staticClass:"Post__option"},[e("p",[t._v(t._s(s.content))]),e("p",[t._v(t._s(s.num))])])})),0)])})),0):e("div",{staticClass:"PostList"},t._l(t.voted,(function(s){return e("div",{key:s.id,staticClass:"Post"},[e("div",{staticClass:"Post__icon"}),e("div",{staticClass:"Post__text"},[t._v(" "+t._s(s.text)+" ")]),e("div",{staticClass:"Post__options"},t._l(s.options,(function(s){return e("div",{key:s.id,staticClass:"Post__option"},[e("p",[t._v(t._s(s.content))]),e("p",[t._v(t._s(s.num))])])})),0)])})),0)])},z=[],B={name:"MyPage",data:function(){return{id:1,isActive:0,user:{},posts:[],voted:[]}},methods:{changeActive:function(t){this.isActive=t}},created:function(){var t=this;this.axios.get("/api/v1/users/"+this.id).then((function(s){t.user=s.data})),this.axios.get("/api/v1/users/"+this.id+"/posts").then((function(s){for(var e=s.data.posts,i=0;i<e.length;i++){e[i].isSelect=0;for(var n=0;n<e[i].options.length;n++)e[i].options[n].selected=!1}t.posts=s.data.posts})),this.axios.get("/api/v1/users/"+this.id+"/voted").then((function(s){for(var e=s.data.posts,i=0;i<e.length;i++){e[i].isSelect=0;for(var n=0;n<e[i].options.length;n++)e[i].options[n].selected=!1}t.voted=s.data.posts}))}},F=B,G=(e("e9d3"),Object(o["a"])(F,U,z,!1,null,null,null)),H=G.exports;i["a"].use(l["a"]);var K=[{path:"/public",component:N},{path:"/Private",component:A},{path:"/New",component:R},{path:"/MyPage",component:H}],Q=new l["a"]({mode:"history",base:"/static/",routes:K}),V=Q,W=e("bc3a"),X=e.n(W),Y=e("a7fe"),Z=e.n(Y);i["a"].config.productionTip=!1,i["a"].use(Z.a,X.a),new i["a"]({router:V,render:function(t){return t(u)}}).$mount("#app")},"5c0b":function(t,s,e){"use strict";var i=e("9c0c"),n=e.n(i);n.a},"66fb":function(t,s,e){},"9c0c":function(t,s,e){},"9d03":function(t,s,e){},a3a5:function(t,s,e){"use strict";var i=e("1c76"),n=e.n(i);n.a},a582:function(t,s,e){"use strict";var i=e("c724"),n=e.n(i);n.a},c724:function(t,s,e){},e589:function(t,s,e){"use strict";var i=e("4365"),n=e.n(i);n.a},e9d3:function(t,s,e){"use strict";var i=e("9d03"),n=e.n(i);n.a},f288:function(t,s,e){"use strict";var i=e("51a3"),n=e.n(i);n.a}});
//# sourceMappingURL=app.5277c5e9.js.map